(window.wpSpeechstreamToolbar=window.wpSpeechstreamToolbar||[]).push([[2],{150:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var i="th_toolbar"},151:function(t,e,n){"use strict";function i(t,e){for(var n,i=0;i<e.length;i++)(n=e[i]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}n.d(e,"a",(function(){return a}));var a=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return function(t,e,n){e&&i(t.prototype,e),n&&i(t,n)}(t,[{key:"rw_decodeFromStorage",value:function(t){var e,n,i,a=decodeURIComponent(t),s="",o=a.length;for(e=0;e<o;e++){var r=a.charAt(e);if("/"==r){if(e<o-1)switch(a.charAt(e+1)){case"/":s+="/",e++;break;case"x":e<o-3&&(n=a.substr(e+2,2),i=this.h2d(n),s+=String.fromCharCode(i),e+=3);break;case"u":e<o-5&&(n=a.substr(e+2,4),i=this.h2d(n),s+=String.fromCharCode(i),e+=5)}}else"+"==r?s+=" ":10==r||13==r||("%"==r?e<o-2?"%2f"==(n=a.substr(e,3))?(s+="/",e+=2):"%2a"==n?(s+=":",e-=2):"%60"==n?(s+="`",e-=2):e<o-9?"%26quot%3b"==(n=a.substr(e,10))?(s+='"',e+=9):e<o-6?"%26quot"==(n=a.substr(e,7))?(s+='"',e+=6):s+=r:s+=r:s+=r:s+=r:"&"==r?e<o-5&&("&#x27"==(n=a.substr(e,6))?s+="'":"&quot;"==n&&(s+='"'),s+=String.fromCharCode(i),e+=5):s+=a.charAt(e))}return s}},{key:"h2d",value:function(t){return parseInt(t,16)}},{key:"d2h",value:function(t){return t.toString(16)}}]),t}()},17:function(t,e,n){"use strict";n.d(e,"a",(function(){return s}));var i=n(15),a=[{DEFAULT_WORD_STYLE:"color:#FFFFFF; background:#009; padding: 2px; margin: -2px; border-radius: 4px; position:relative",DEFAULT_SENTENCE_STYLE:"color:#009; background:#FFFF00"},{DEFAULT_WORD_STYLE:"color:#000; background:#FFFF00; padding: 2px; margin: -2px; border-radius: 4px; position:relative",DEFAULT_SENTENCE_STYLE:"color:#FFFF00; background:#000"},{DEFAULT_WORD_STYLE:"color:#6cf; background:#009; padding: 2px; margin: -2px; border-radius: 4px; position:relative",DEFAULT_SENTENCE_STYLE:"color:#009; background:#6cf"},{DEFAULT_WORD_STYLE:"color:#cc9; background:#009; padding: 2px; margin: -2px; border-radius: 4px; position:relative",DEFAULT_SENTENCE_STYLE:"color:#009; background:#cc9"}],s={currentVoice:"Ava",speed:40,saveSettings:!0,translateSource:"en-gb",translateDestination:"es-mx",wordHighlightStyle:a[0].DEFAULT_WORD_STYLE,sentenceHighlightStyle:a[0].DEFAULT_SENTENCE_STYLE,highlightStyleId:0,announceLinks:!1,announceLinksWord:"link",screenMaskType:"LetterBox",backgroundColor:"#000000",backgroundOpacity:50,readingLightHeight:100,readingLightColor:"#ffffff",readingLightOpacity:0,readingLightVisibility:!0,screenMaskingActive:!1,textMagnifierSize:0,clickToSpeak:!0,continuousSpeechEnabled:!0,toolbarTheme:0,pictureDictionaryLanguage:"en-gb",settingsLoaded:!1,init:function(t){this.saveSettings=!1,this.setVoice(t.speechSettings.defaultVoice),this.setAnnounceLinksWord(t.speechSettings.announceLinksWord),this.setAnnounceLinks(t.speechSettings.announceLinks),this.setWordHighlightStyle(t.speechSettings.wordHighlightStyle||0),this.setSentenceHighlightStyle(t.speechSettings.sentenceHighlightStyle||0),this.setClickToSpeak(t.speechSettings.clickToSpeak),this.setContinuousSpeechEnabled(t.speechSettings.continuousSpeechEnabled),this.setPictureDictionaryLanguage(t.translate.translateSource),this.setTranslationSource(t.translate.translateSource),this.setTranslationDestination(t.translate.translateDestination),this.setScreenMaskType(t.screenMaskType),this.setScreenMaskSize(t.screenMaskSize),this.setScreenMaskColour(t.screenMaskColour),this.setScreenMaskOpacity(t.screenMaskOpacity),this.setBackgroundColour(t.backgroundColour),this.setBackgroundOpacity(t.backgroundOpacity),this.setReadingLightHeight(t.readingHeight),this.setReadingLightColour(t.readingColour),this.setReadingLightOpacity(t.readingOpacity),this.setReadingLightVisibility(t.readingLightVisibility),this.setToolbarTheme(t.toolbartheme),this.setTextMagnifierSize(t.textMagnifierSize),this.saveSettings=t.saveSettings||!0,this.saveSettings&&(this.load(t),this.save()),this.settingsLoaded=!0},getSettingsLoaded:function(){return this.settingsLoaded},setTextMagnifierSize:function(t){this.textMagnifierSize=t,this.save()},getTextMagnifierSize:function(){return this.textMagnifierSize},setBackgroundColour:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"#000000";this.backgroundColor=t,this.save()},getBackgroundColour:function(){return this.backgroundColor},setBackgroundOpacity:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:50;this.backgroundOpacity=t,this.save()},getBackgroundOpacity:function(){return this.backgroundOpacity},setReadingLightHeight:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:100;this.readingLightHeight=t,this.save()},getReadingLightHeight:function(){return this.readingLightHeight},setReadingLightColour:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"#ffffff";this.readingLightColor=t,this.save()},getReadingLightColour:function(){return this.readingLightColor},setReadingLightOpacity:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0;this.readingLightOpacity=t,this.save()},getReadingLightOpacity:function(){return this.readingLightOpacity},setReadingLightVisibility:function(){var t=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];this.readingLightVisibility=t,this.save()},getReadingLightVisibility:function(){return this.readingLightVisibility},setScreenMaskOpacity:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:.25;1<t&&(t/=100),this.screenMaskOpacity=t,this.save()},getScreenMaskOpacity:function(){return this.screenMaskOpacity},setScreenMaskColour:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"rgb(17, 17, 17)";this.screenMaskColour=t,this.save()},getScreenMaskColour:function(){return this.screenMaskColour},setScreenMaskSize:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"800px";this.screenMaskSize=t+"px",this.save()},getScreenMaskSize:function(){return this.screenMaskSize},setScreenMaskType:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"LetterBox";"LetterBox"!=t&&"Ruler"!=t&&(t="LetterBox"),this.screenMaskType=t,this.save()},getScreenMaskType:function(){return this.screenMaskType},setToolbarTheme:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0;this.toolbarTheme=t,this.save()},getToolbarTheme:function(){return this.toolbarTheme},setPictureDictionaryLanguage:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"en-gb";void 0===i.default[t]&&(t="en-gb"),this.pictureDictionaryLanguage=t,this.save()},getPictureDictionaryLanguage:function(){return i.default[this.pictureDictionaryLanguage]},setTranslationSource:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"en-gb";void 0===i.default[t]&&(t="en-gb"),this.translateSource=t,this.save()},getTranslationSource:function(){return i.default[this.translateSource]},setTranslationDestination:function(t){void 0===i.default[t]&&(t="es-mx"),this.translateDestination=t,this.save()},getTranslationDestination:function(){return i.default[this.translateDestination]},getTranslationList:function(){return i.default},setAnnounceLinksWord:function(t){this.announceLinksWord=t,this.save()},getAnnounceLinksWord:function(){return this.announceLinksWord},setAnnounceLinks:function(){var t=!!(0<arguments.length&&void 0!==arguments[0])&&arguments[0];this.announceLinks=t,this.save()},getAnnounceLinks:function(){return this.announceLinks},setSentenceHighlightStyle:function(t){this.sentenceHighlightStyle="number"==typeof t?a[t].DEFAULT_SENTENCE_STYLE:t,this.highlightStyleId=t,this.save()},getSentenceHighlightStyle:function(){return this.sentenceHighlightStyle||a[0].DEFAULT_SENTENCE_STYLE},setWordHighlightStyle:function(t){this.wordHighlightStyle="number"==typeof t?a[t].DEFAULT_WORD_STYLE:t,this.highlightStyleId=t,this.save()},getWordHighlightStyle:function(){return this.wordHighlightStyle||a[0].DEFAULT_WORD_STYLE},getHighlightId:function(){return this.highlightStyleId},setHighlightId:function(t){this.setSentenceHighlightStyle(t),this.setWordHighlightStyle(t)},setVoiceSpeed:function(t){this.speed=t,this.save()},getVoiceSpeed:function(){return this.speed},setVoice:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"Ava";this.currentVoice=t,this.save()},getVoice:function(){return this.currentVoice},setClickToSpeak:function(t){this.clickToSpeak=t,this.save()},getClickToSpeak:function(){return this.clickToSpeak},setContinuousSpeechEnabled:function(t){this.continuousSpeechEnabled=t,this.save()},getContinuousSpeechEnabled:function(){return this.continuousSpeechEnabled},save:function(){this.saveSettings&&"undefined"!=typeof localStorage&&localStorage.setItem("API_SETTINGS_V2",JSON.stringify(this))},load:function(t){var e,n=this;if("undefined"!=typeof localStorage){var s=localStorage.getItem("API_SETTINGS_V2"),o=JSON.parse(s);for(var r in o)switch(r){case"currentVoice":if(void 0!==o[r]&&t.toolbarButtons.includes("translate"))!!(0<document.getElementsByClassName("thpdfviewer").length)||(this[r]=o[r]);break;case"announceLinksWord":case"speed":void 0!==o[r]&&(this[r]=o[r]);break;case"highlightStyleId":"number"==typeof o[r]&&(this[r]=o[r]);break;case"backgroundOpacity":case"readingLightHeight":void 0!==o[r]&&(this[r]=o[r]);break;case"readingLightOpacity":"stnumberring"==typeof o[r]&&(this[r]=o[r]);break;case"textMagnifierSize":case"toolbarTheme":case"announceLinks":case"saveSettings":case"readingLightVisibility":case"screenMaskingActive":case"clickToSpeak":void 0!==o[r]&&(this[r]=o[r]);break;case"continuousSpeechEnabled":break;case"translateSource":if(void 0!==o[r])!!(0<document.getElementsByClassName("thpdfviewer").length)||(this[r]=o[r]);break;case"translateDestination":if(void 0!==o[r])!!(0<document.getElementsByClassName("thpdfviewer").length)||(this[r]=o[r]);break;case"pictureDictionaryLanguage":if(void 0!==o[r])if(t.toolbarButtons.includes("translate")){var c=o[r];void 0===i.default[c]&&(c="en-gb"),this[r]=c}else this[r];break;case"backgroundColor":void 0!==o[r]&&(this[r]=o[r]);break;case"readingLightColor":void 0!==o[r]&&null!=o[r].match(/#[a-z|0-9]{6}$/i)&&(this[r]=o[r]);break;case"wordHighlightStyle":for(var l=0;l<a.length;l++)if(o[r]==a[l].DEFAULT_WORD_STYLE){this[r]=o[r];break}break;case"sentenceHighlightStyle":for(var u=0;u<a.length;u++)if(o[r]==a[u].DEFAULT_SENTENCE_STYLE){this[r]=o[r];break}}}null!=t&&null!==(e=t.translate)&&void 0!==e&&e.removeList&&function(){var e=t.translate.removeList,a=function(a){Object.keys(i.default).forEach((function(s){s==e[a]&&s!=t.translate.translateDestination&&s!=n.translateDestination&&delete i.default[s]}))};for(var s in t.translate.removeList)a(s)}()},TurnOffSave:function(){this.saveSettings=!1,localStorage.removeItem("API_SETTINGS_V2")},TurnOnSave:function(){this.saveSettings=!0},filterId:function(t){var e,n,i,a=t.length;if(100<a)return this.hex_md5(t);for(e=0;e<a;e++)!(47<(n=t.charCodeAt(e))&&58>n||63<n&&92>n||94<n&&124>n)&&(126<n||92==n||47==n||58==n||59==n||42==n||63==n||34==n||60==n||62==n||124==n||35==n||37==n||43==n||38==n||94==n||39==n||91==n||93==n||64==n||33==n||36==n||40==n||41==n||44==n||61==n)&&(i="^"+n.toString(16),a=(t=t.substr(0,e)+i+t.substr(e+1)).length,e+=i.length-1);return t},hex_md5:function(t){return this.binl2hex(this.core_md5(this.str2binl(t),t.length*this.chrsz))},core_md5:function(t,e){t[e>>5]|=128<<e%32,t[14+(e+64>>>9<<4)]=e;for(var n=1732584193,i=-271733879,a=-1732584194,s=271733878,o=0;o<t.length;o+=16){var r=n,c=i,l=a,u=s;n=this.md5_ff(n,i,a,s,t[o+0],7,-680876936),s=this.md5_ff(s,n,i,a,t[o+1],12,-389564586),a=this.md5_ff(a,s,n,i,t[o+2],17,606105819),i=this.md5_ff(i,a,s,n,t[o+3],22,-1044525330),n=this.md5_ff(n,i,a,s,t[o+4],7,-176418897),s=this.md5_ff(s,n,i,a,t[o+5],12,1200080426),a=this.md5_ff(a,s,n,i,t[o+6],17,-1473231341),i=this.md5_ff(i,a,s,n,t[o+7],22,-45705983),n=this.md5_ff(n,i,a,s,t[o+8],7,1770035416),s=this.md5_ff(s,n,i,a,t[o+9],12,-1958414417),a=this.md5_ff(a,s,n,i,t[o+10],17,-42063),i=this.md5_ff(i,a,s,n,t[o+11],22,-1990404162),n=this.md5_ff(n,i,a,s,t[o+12],7,1804603682),s=this.md5_ff(s,n,i,a,t[o+13],12,-40341101),a=this.md5_ff(a,s,n,i,t[o+14],17,-1502002290),i=this.md5_ff(i,a,s,n,t[o+15],22,1236535329),n=this.md5_gg(n,i,a,s,t[o+1],5,-165796510),s=this.md5_gg(s,n,i,a,t[o+6],9,-1069501632),a=this.md5_gg(a,s,n,i,t[o+11],14,643717713),i=this.md5_gg(i,a,s,n,t[o+0],20,-373897302),n=this.md5_gg(n,i,a,s,t[o+5],5,-701558691),s=this.md5_gg(s,n,i,a,t[o+10],9,38016083),a=this.md5_gg(a,s,n,i,t[o+15],14,-660478335),i=this.md5_gg(i,a,s,n,t[o+4],20,-405537848),n=this.md5_gg(n,i,a,s,t[o+9],5,568446438),s=this.md5_gg(s,n,i,a,t[o+14],9,-1019803690),a=this.md5_gg(a,s,n,i,t[o+3],14,-187363961),i=this.md5_gg(i,a,s,n,t[o+8],20,1163531501),n=this.md5_gg(n,i,a,s,t[o+13],5,-1444681467),s=this.md5_gg(s,n,i,a,t[o+2],9,-51403784),a=this.md5_gg(a,s,n,i,t[o+7],14,1735328473),i=this.md5_gg(i,a,s,n,t[o+12],20,-1926607734),n=this.md5_hh(n,i,a,s,t[o+5],4,-378558),s=this.md5_hh(s,n,i,a,t[o+8],11,-2022574463),a=this.md5_hh(a,s,n,i,t[o+11],16,1839030562),i=this.md5_hh(i,a,s,n,t[o+14],23,-35309556),n=this.md5_hh(n,i,a,s,t[o+1],4,-1530992060),s=this.md5_hh(s,n,i,a,t[o+4],11,1272893353),a=this.md5_hh(a,s,n,i,t[o+7],16,-155497632),i=this.md5_hh(i,a,s,n,t[o+10],23,-1094730640),n=this.md5_hh(n,i,a,s,t[o+13],4,681279174),s=this.md5_hh(s,n,i,a,t[o+0],11,-358537222),a=this.md5_hh(a,s,n,i,t[o+3],16,-722521979),i=this.md5_hh(i,a,s,n,t[o+6],23,76029189),n=this.md5_hh(n,i,a,s,t[o+9],4,-640364487),s=this.md5_hh(s,n,i,a,t[o+12],11,-421815835),a=this.md5_hh(a,s,n,i,t[o+15],16,530742520),i=this.md5_hh(i,a,s,n,t[o+2],23,-995338651),n=this.md5_ii(n,i,a,s,t[o+0],6,-198630844),s=this.md5_ii(s,n,i,a,t[o+7],10,1126891415),a=this.md5_ii(a,s,n,i,t[o+14],15,-1416354905),i=this.md5_ii(i,a,s,n,t[o+5],21,-57434055),n=this.md5_ii(n,i,a,s,t[o+12],6,1700485571),s=this.md5_ii(s,n,i,a,t[o+3],10,-1894986606),a=this.md5_ii(a,s,n,i,t[o+10],15,-1051523),i=this.md5_ii(i,a,s,n,t[o+1],21,-2054922799),n=this.md5_ii(n,i,a,s,t[o+8],6,1873313359),s=this.md5_ii(s,n,i,a,t[o+15],10,-30611744),a=this.md5_ii(a,s,n,i,t[o+6],15,-1560198380),i=this.md5_ii(i,a,s,n,t[o+13],21,1309151649),n=this.md5_ii(n,i,a,s,t[o+4],6,-145523070),s=this.md5_ii(s,n,i,a,t[o+11],10,-1120210379),a=this.md5_ii(a,s,n,i,t[o+2],15,718787259),i=this.md5_ii(i,a,s,n,t[o+9],21,-343485551),n=this.safe_add(n,r),i=this.safe_add(i,c),a=this.safe_add(a,l),s=this.safe_add(s,u)}return[n,i,a,s]},md5_cmn:function(t,e,n,i,a,s){return this.safe_add(this.bit_rol(this.safe_add(this.safe_add(e,t),this.safe_add(i,s)),a),n)},md5_ff:function(t,e,n,i,a,s,o){return this.md5_cmn(e&n|~e&i,t,e,a,s,o)},md5_gg:function(t,e,n,i,a,s,o){return this.md5_cmn(e&i|n&~i,t,e,a,s,o)},md5_hh:function(t,e,n,i,a,s,o){return this.md5_cmn(e^n^i,t,e,a,s,o)},md5_ii:function(t,e,n,i,a,s,o){return this.md5_cmn(n^(e|~i),t,e,a,s,o)},safe_add:function(t,e){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n},bit_rol:function(t,e){return t<<e|t>>>32-e},str2binl:function(t){for(var e=[],n=(1<<this.chrsz)-1,i=0;i<t.length*this.chrsz;i+=this.chrsz)e[i>>5]|=(t.charCodeAt(i/this.chrsz)&n)<<i%32;return e},binl2hex:function(t){for(var e=this.hexcase?"0123456789ABCDEF":"0123456789abcdef",n="",i=0;i<4*t.length;i++)n+=e.charAt(15&t[i>>2]>>i%4*8+4)+e.charAt(15&t[i>>2]>>i%4*8);return n},$rw_hash:function(t){return this.hex_md5(t)}}},4:function(t,e,n){"use strict";n.r(e),n.d(e,"Api",(function(){return F}));var i=n(255),a=n(181),s=n(150),o=n(17),r=n(7);function c(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function l(t){for(var e,n=1;n<arguments.length;n++)e=null==arguments[n]?{}:arguments[n],n%2?c(Object(e),!0).forEach((function(n){u(t,n,e[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):c(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}));return t}function u(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function h(t){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function g(t,e,n,i,a,s,o){try{var r=t[s](o),c=r.value}catch(t){return void n(t)}r.done?e(c):Promise.resolve(c).then(i,a)}function d(t,e){for(var n,i=0;i<e.length;i++)(n=e[i]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}var f=function(){function t(e){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.settings=e}return function(t,e,n){e&&d(t.prototype,e),n&&d(t,n)}(t,[{key:"loadAPIs",value:function(){var t=function(t){return function(){var e=this,n=arguments;return new Promise((function(i,a){function s(t){g(r,i,a,s,o,"next",t)}function o(t){g(r,i,a,s,o,"throw",t)}var r=t.apply(e,n);s(void 0)}))}}((function*(t){var e;if(null!=t&&(this.clearSpeechstreamData=t.clearSpeechstreamData,this.isToolbarActive=t.isToolbarActive,this.toggleBar=t.toggleBar,this.toggleSettings=function(){t.settingsHandler({title:"settings",icon:"settings",response:{},getHoverState:o.a.getClickToSpeak})}),!0===(null===(e=this.settings.publicFunctions)||void 0===e?void 0:e.active)){var i,a,s,r,c;if(null!==(i=this.settings.publicFunctions)&&void 0!==i&&i.speech){var u=yield n.e(187).then(n.bind(null,275));u.speechTools.init(),this.speechTools=u.speechTools}if(null!==(a=this.settings.publicFunctions)&&void 0!==a&&a.text){var g=yield n.e(190).then(n.bind(null,276));g.textTools.init(t.dictionaryHandler,t.pictureDictionaryHandler,t.transHandler),this.textTools=g.textTools}if(null!==(s=this.settings.publicFunctions)&&void 0!==s&&s.study){var d=yield n.e(189).then(n.bind(null,277));d.studyTools.init(t.collectHandler),this.studyTools=d.studyTools}if(null!==(r=this.settings.publicFunctions)&&void 0!==r&&r.dom){var f=yield n.e(178).then(n.bind(null,278));f.domControlTools.init(),this.domControlTools=f.domControlTools}if(null!==(c=this.settings.publicFunctions)&&void 0!==c&&c.math){var p=yield n.e(182).then(n.bind(null,279));p.mathTools.init(),this.mathTools=p.mathTools}if(null!=this.settings.windowsScope)if("object"===h(this.settings.windowsScope)){var S=l(l({},this),this.settings.windowsScope.speechstream);this.settings.windowsScope.speechstream=l(l({},this),S)}else{var v=window[this.settings.windowsScope];window[this.settings.windowsScope]=l(l({},this),v)}console.log("Public functions loaded")}}));return function(){return t.apply(this,arguments)}}()},{key:"disableSaveSettings",value:function(t){t?(o.a.TurnOffSave(),r.a.TurnOffSave()):(o.a.TurnOnSave(),r.a.TurnOnSave())}}]),t}(),p=n(15);function S(t,e){for(var n,i=0;i<e.length;i++)(n=e[i]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}var v="First_use_only",y="Always_on",b=function(){function t(){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.isSafari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}return function(t,e,n){e&&S(t.prototype,e),n&&S(t,n)}(t,[{key:"launch",value:function(t,e){var n=this;if(!(e.isMobile||this.isSafari||e.audioalert!=y&&e.audioalert!=v)){if(e.audioalert==v&&this.hasItRun())return;var i=setInterval((function(){o.a.getSettingsLoaded()&&(null!=e.audioalertcusttext&&""!=e.audioalertcusttext?t.speakWithOutHighlight([e.audioalertcusttext]):t.speakWithOutHighlight([e.locale.audioalert]),n.saveFirstRun(),clearInterval(i))}),100)}}},{key:"saveFirstRun",value:function(){"undefined"!=typeof localStorage&&localStorage.setItem("audioalert",JSON.stringify({audioalert:!0}))}},{key:"hasItRun",value:function(){if("undefined"!=typeof localStorage){var t=localStorage.getItem("audioalert");return null!=t&&JSON.parse(t).audioalert}}}]),t}();function m(t){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function k(t,e,n,i,a,s,o){try{var r=t[s](o),c=r.value}catch(t){return void n(t)}r.done?e(c):Promise.resolve(c).then(i,a)}function T(t){return function(){var e=this,n=arguments;return new Promise((function(i,a){function s(t){k(r,i,a,s,o,"next",t)}function o(t){k(r,i,a,s,o,"throw",t)}var r=t.apply(e,n);s(void 0)}))}}function L(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return A(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?A(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,a=function(){};return{s:a,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s=!0,o=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){o=!0,t},f:function t(){try{s||null==n.return||n.return()}finally{if(o)throw t}}}}function A(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}function _(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function E(t,e){for(var n,i=0;i<e.length;i++)(n=e[i]).enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}function O(t,e){return(O=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function C(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=I(t);if(e){var a=I(this).constructor;n=Reflect.construct(i,arguments,a)}else n=i.apply(this,arguments);return P(this,n)}}function P(t,e){if(e&&("object"===m(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function I(t){return(I=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var D=function(t){function e(){var t,a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};if(_(this,e),(t=i.call(this)).server=a.speechSettings.pronunciationDns||"pronunciation.speechstream.net",t._custId=a.speechSettings.custId,t._username=a.speechSettings.username,t._bookId=a.speechSettings.bookId,t._pageId=a.speechSettings.pageId,t._data=[],t.paths=[],t.gobalResponse,t.pageProns=[],t.docket=a.toolbarConfig.docked,t.contractId=a.contractId||null,t.locale=null,n.e(207).then(n.t.bind(null,280,3)).then((function(e){t.gobalResponse=e.default,t.setData(e.default)})),null!=t.contractId){var s=F.getTranslateSource().spokenLang||null;null!=s&&(t.locale=-1==["en-au","de-de","nl-nl","nl-de","no-no","sv-se","sv","en-gb","en-us"].indexOf(s)?null:s,"en-au"==t.locale&&(t.locale="au"),"de-de"==t.locale&&(t.locale="de"),("nl-de"==t.locale||"nl-nl"==t.locale)&&(t.locale="nl"),"no-no"==t.locale&&(t.locale="no"),("sv-se"==t.locale||"sv"==t.locale)&&(t.locale="se"),("en-gb"==t.locale||"en-ie"==t.locale||"en-sc"==t.locale||"en-gb-wls"==t.locale||"en-in"==t.locale)&&(t.locale="uk"),"en-us"==t.locale&&(t.locale="us")),t.setPathsBA()}else t.setPathsSS();return t}!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&O(t,e)}(e,t);var i=C(e);return function(t,e,n){e&&E(t.prototype,e),n&&E(t,n)}(e,[{key:"setPathsBA",value:function(){this.paths.push("js/prons/".concat(this.contractId,".json")),null!=this.locale&&this.paths.push("js/prons/".concat(this.locale,".json"))}},{key:"setPathsSS",value:function(){this.paths.push("".concat(this._username,"/").concat(this._custId,"/").concat(this._bookId,"/*/prons.json")),this.paths.push("".concat(this._username,"/").concat(this._custId,"/").concat(this._bookId,"/").concat(this._pageId,"/prons.json"));var t=document.querySelectorAll('[texthelpcmd^="pageid"]');if(null!=t)for(var e,n=0;n<t.length;n++)if(null!=(e=t[n].attributes.texthelpcmd.value)){var i=e.indexOf(":");-1<i&&this.paths.push("".concat(this._username,"/").concat(this._custId,"/").concat(this._bookId,"/").concat(e.substr(i+1),"/prons.json"))}}},{key:"changePageDynamically",value:function(){var t=this;this.paths=[],this.setPathsSS();var e,n=[],i=[],a=[],s=L(this.pageProns);try{var o=function(){var s,o=e.value,r=!1,c=L(t.paths);try{for(c.s();!(s=c.n()).done;){var l=s.value;if(Object.values(o).includes(l)){r=!0,i.push(o);break}}}catch(t){c.e(t)}finally{c.f()}r?(a.push(o),t.paths=t.paths.filter((function(t){return t!=o.path}))):n.push(o)};for(s.s();!(e=s.n()).done;)o()}catch(t){s.e(t)}finally{s.f()}return n}},{key:"getPronunciations",value:function(){return this._data}},{key:"setData",value:function(t){for(var e=0;e<t.length;e++)t[e].saythis=this.rw_decodeFromStorage(t[e].saythis),t[e].likethis=this.rw_decodeFromStorage(t[e].likethis),this._data.push(t[e])}},{key:"deleteFromData",value:function(t){this._data=this._data.filter((function(e){return e!=t}))}},{key:"get",value:function(){var t=T((function*(){var t=this,e=this.paths;yield Promise.all(e.map(function(){var e=T((function*(e){var n="https://"+t.server+"/"+e;return t.send(n).then((function(n){t.pageProns.push({path:e,data:n}),t.setData(n)})).catch((function(){}))}));return function(){return e.apply(this,arguments)}}()))}));return function(){return t.apply(this,arguments)}}()},{key:"send",value:function(t){return fetch(t,{method:"GET",headers:{"Content-Type":"application/json; charset=utf-8"},mode:"cors",cache:"no-cache",credentials:"same-origin"}).then((function(t){return t.json()})).catch((function(){}))}},{key:"custId",get:function(){return this._custId},set:function(t){this._custId=t}},{key:"username",get:function(){return this._username},set:function(t){this._username=t}},{key:"bookId",get:function(){return this._bookId},set:function(t){this._bookId=t}},{key:"pageId",get:function(){return this._pageId},set:function(t){this._pageId=t}}]),e}(n(151).a),w=n(8),M=n(0);function R(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return H(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?H(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,a=function(){};return{s:a,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s=!0,o=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){o=!0,t},f:function t(){try{s||null==n.return||n.return()}finally{if(o)throw t}}}}function H(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}function B(t,e,n,i,a,s,o){try{var r=t[s](o),c=r.value}catch(t){return void n(t)}r.done?e(c):Promise.resolve(c).then(i,a)}function V(t){return function(){var e=this,n=arguments;return new Promise((function(i,a){function s(t){B(r,i,a,s,o,"next",t)}function o(t){B(r,i,a,s,o,"throw",t)}var r=t.apply(e,n);s(void 0)}))}}var F={htmlparser:null,user:"",speechDns:"",Speech:null,highlightsApi:null,notesApi:null,screenMask:null,textMagnifier:null,translateApi:null,simplify:null,globalFunctions:null,apiObject:null,pdfRedirect:null,pronunciationApi:null,pronunciationEditApi:null,locale:"uk",audioAlert:new b,playAudioAlertOnLoad:!1,translateFinishedCallback:null,updateLocale:null,analytics:null,initialized:!1,isBA:!0,init:function(t){var e=this,n=!!(1<arguments.length&&void 0!==arguments[1])&&arguments[1],a=2<arguments.length?arguments[2]:void 0;if(!this.initialized){this.initialized=!0,this.config=t,this.apiObject=a;var o=this.config.toolbarButtons;if(this.config.isPAC){var r;this.loadExtension();var c=setInterval((function(){if(F.extension){try{r=F.extension.getAnalyticsId()}catch(t){}r&&(clearInterval(c),void 0!==e.config.disable_ga&&!e.config.disable_ga&&e.config.trackingCode&&e.isBA&&e.config.isPAC&&e.loadBrowsealoudPACAnalytics(r))}}),100)}void 0!==this.config.disable_ga&&!this.config.disable_ga&&this.config.trackingCode&&this.isBA&&!this.config.isPAC?this.loadBrowsealoudAnalytics(this.config.trackingCode):!this.isBA&&this.loadSpeechstreamAnalytics(this.config.trackingCode),(o.includes("translate")&&this.config.translate.translatePage||o.includes("highlights")||o.includes("stickynotes"))&&(this.config.htmlParser.tagPage=!0,this.config.htmlParser.tagClass="thsentence"),this.config.htmlParser.toolbarID=s.a,this.htmlparser=new i.a(this.config.htmlParser),this.htmlparser.hoverSpeak.setCallback((function(){e.Speech.stop(),e.Speech.play()})),this.htmlparser.clickToSpeak.setCallback((function(){e.Speech.stop(),e.Speech.play()})),this.speechDns=t.speechDns||"speech.speechstream.net",this.user=t.user||"",this.setupConfig(),void 0!==t.langId&&this.getLocale(t.langId),n||this.toolbarLoaded()}},loadBrowsealoudAnalytics:function(t){var e=this;return V((function*(){var i=yield n.e(175).then(n.bind(null,259));e.analytics=new i.BrowsealoudAnalytics(t)}))()},loadBrowsealoudPACAnalytics:function(t){var e=this;return V((function*(){var i=yield n.e(176).then(n.bind(null,260));e.analytics=new i.BrowsealoudPACAnalytics(t)}))()},loadSpeechstreamAnalytics:function(t){var e=this;return V((function*(){var i=yield n.e(188).then(n.bind(null,261));e.analytics=new i.SpeechstreamAnalytics(e.config,t)}))()},toolbarLoaded:function(){var t=this;return V((function*(){o.a.init(t.config);for(var e=t.config.toolbarButtons,n=!1,i=0;i<e.length;i++)switch(e[i]){case"play":case"hover":case"clicktospeak":case"stop":case"pause":n||(null==t.Speech&&t.loadSpeechModule(),!e.includes("prons")&&t.loadPronunciations(),n=!0);break;case"translate":yield t.loadTranslate(),t.translateApi.init().then((function(){var e=o.a.getTranslationDestination().spokenLang||o.a.getTranslationDestination().glang;"function"==typeof t.translateFinishedCallback&&t.setTransFinishedCallback(t.translateFinishedCallback),t.config.translate.translatePage&&e!=t.config.translate.translateDestination&&F.transPage()}));break;case"dictionary":t.loadDictionary();break;case"picturedict":t.loadPictureDictionary();break;case"mp3":t.loadMp3();break;case"screenmask":t.screenMask||t.loadScreenMask();break;case"textticker":break;case"simplify":t.loadSimplify();break;case"stickynotes":t.loadNotes();break;case"highlights":yield t.loadHighlights();break;case"pdf":t.loadPDF();break;case"prons":t.loadPronunciationsEdit();break;case"prediction":t.loadPrediction()}yield t.globalFunctionsCall(),M.a.publish("toolbarLoaded",t.globalFunctions)}))()},globalFunctionsCall:function(){var t=this;return V((function*(){if(void 0!==t.config.globalFunctions&&(t.globalFunctions=new f(t.config.globalFunctions),yield t.globalFunctions.loadAPIs(t.apiObject)),void 0!==t.config.disable_cookies&&t.config.disable_cookies)var e=setInterval((function(){t.globalFunctions&&(t.globalFunctions.disableSaveSettings(!0),clearInterval(e))}),100)}))()},setupConfig:function(){var t=this;return V((function*(){var e=t.getVoiceFromSpeechRules(),n=p.default;if(void 0===t.config.speechSettings&&(void 0===t.config.speechSettings.bookId&&(t.config.speechSettings.bookId=o.a.filterId(t.config.speechSettings.bookId)),void 0===t.config.speechSettings.pageId&&(t.config.speechSettings.pageId=o.a.filterId(t.config.speechSettings.pageId))),null!=e)t.config.speechSettings.defaultVoice=void 0===e.voice?e.defaultVoice:e.voice;else if(null!==t.config.langId&&""!==t.config.langId)for(var i in n)if(n[i].id==t.config.langId){t.config.speechSettings.defaultVoice=void 0===n[i].voice?n[i].defaultVoice:n[i].voice,t.config.translate.translateSource=i,t.config.translate.translateDestination=i;break}if(null!=t.config.speechSettings.usePageLangTag&&void 0!==t.config.speechSettings.usePageLangTag&&t.config.speechSettings.usePageLangTag){var a=t.htmlparser.getDocumentLanguage();if(null!==a&&""!==a)if(null==n[a]||void 0===n[a]){for(var s in n)if(n[s].glang==a&&n[s].spokenLang){t.config.speechSettings.defaultVoice=void 0===n[s].voice?n[s].defaultVoice:n[s].voice;break}}else t.config.speechSettings.defaultVoice=void 0===n[a].voice?n[a].defaultVoice:n[a].voice,t.config.speechSettings.defaultVoice=void 0===a.voice?n[a].defaultVoice:n[a].voice}}))()},getLocale:function(t){for(var e in this.locale=null,p.default)if(p.default[e].id==t){var n=p.default[e].spokenLang.split("-");if(2==n.length){this.locale="gb"==n[1]?"uk":n[1],this.config.lang=this.locale;break}this.locale=n[0],this.config.lang=this.locale;break}},translateStatusUpdate:{},transPDF:function(){for(var t,e,n,i=this,a=window.location.hash.replace("#","").split("&"),s=0;s<a.length;s++)try{-1==a[s].indexOf("langidsrc=")?-1==a[s].indexOf("locale=")?-1!=a[s].indexOf("langiddest=")&&(n=a[s].split("=")[1]):e=a[s].split("=")[1]:t=a[s].split("=")[1]}catch(t){}"undefined"==typeof BrowseAloud&&(window.BrowseAloud={}),t=p.default[t],n=p.default[n],null!=t&&null!=e&&null!=n?(BrowseAloud.translate={sourceLangObj:t,targetLangObj:n,sourceLang:t.spokenLang||t.glang,targetLang:n.spokenLang||n.glang},this.config.translate.translateSource=t.spokenLang||t.glang,this.config.translate.translateDestination=n.spokenLang||n.glang,this.config.locale.id!=n.id&&"function"==typeof this.updateLocale&&this.updateLocale(n.id)):BrowseAloud.translate={sourceLangObj:this.getTranslateSource(),targetLangObj:this.getTranslateDestination(),sourceLang:this.getTranslateSource().spokenLang||this.getTranslateSource().glang,targetLang:this.getTranslateDestination().spokenLang||this.getTranslateDestination().glang},BrowseAloud.toolbar={translate:{setState:function(t){i.translateStatusUpdate(!("waiting"!==t))}},state:{waiting:"waiting",on:"on",off:"off"},settings:{settingsActive:!1,isHelpOpen:!1}},BrowseAloud.pdf={settings:{isPromptOpen:!1}},BrowseAloud.util={getPageLanguage:function(){return BrowseAloud.translate.targetLangObj},startsWith:function(t,e){return!(t.charAt(0)!=e)},endsWith:function(t,e){return!(t.charAt(t.length-1)!=e)}};var o=setInterval((function(){i.config.translate.translatePage?i.translateApi&&(i.transPage(),clearInterval(o)):clearInterval(o)}),1e3)},_registerNotesCallback:function(){this.notesApi.setCallbackFunctions(this.callbackOpen,this.callbackClose)},setNotesCallback:function(t,e){this.callbackOpen=t,this.callbackClose=e},loadPDF:function(){var t=this;return V((function*(){var e=yield n.e(184).then(n.bind(null,262));t.pdfRedirect=new e.PDFRedirect(t.config.pdf||{})}))()},loadSimplify:function(){var t=this;Promise.all([n.e(4),n.e(137),n.e(186)]).then(n.bind(null,263)).then((function(e){t.simplify=new e.SimplifyPage(t.config.simplifySettings)}))},loadScreenMask:function(){var t=this;return V((function*(){var e=yield n.e(139).then(n.bind(null,321));t.screenMask=new e.ScreenMask,t.screenMask.setBackgroundColour(o.a.getBackgroundColour()),t.screenMask.setBackgroundOpacity(o.a.getBackgroundOpacity()),t.screenMask.setReadingLightHeight(o.a.getReadingLightHeight()),t.screenMask.setReadingLightColour(o.a.getReadingLightColour()),t.screenMask.setReadingLightOpacity(o.a.getReadingLightOpacity()),t.screenMask.setReadingLightVisibility(o.a.getReadingLightVisibility());try{var i=parseInt(document.body.style.top)||0;0<i&&t.screenMask.setDocumentBodyTop(i)}catch(t){}}))()},loadSpeechModule:function(){var t=this;return V((function*(){t.config.speechSettings.ignoreToolbarId=s.a,t.Speech=new a.a(t.config.speechSettings,t.htmlparser,t.config.defaultTranslateVoices);var e=setInterval((function(){o.a.getSettingsLoaded()&&(t.Speech.setVoice(o.a.getVoice()),t.Speech.setVoiceSpeed(o.a.getVoiceSpeed()),t.htmlparser.setWordHighlightStyle(o.a.getWordHighlightStyle(0)),t.htmlparser.setSentenceHighlightStyle(o.a.getSentenceHighlightStyle(0)),t.Speech.setContinuousSpeechEnabled(o.a.getContinuousSpeechEnabled()),t.htmlparser.setAnnounceLinksAsWords(o.a.getAnnounceLinksWord()),t.playAudioAlertOnLoad&&t.audioAlert.launch(t.Speech,t.config),clearInterval(e))}),100);if(void 0!==t.config.censoredWords&&t.config.censoredWords.enabled){var i=yield n.e(177).then(n.bind(null,264));t.censoredWords=new i.CensoredWords(t.config.censoredWords);for(var r=t.censoredWords.getWords(),c=0;c<r.length;c++)t.Speech.addPronunciations(r[c],"censored"),r[c]!=r[c].toLowerCase()&&t.Speech.addPronunciations(r[c].toLowerCase(),"censored")}}))()},loadPronunciationsEdit:function(){var t=this;return V((function*(){var e=yield Promise.all([n.e(132),n.e(179)]).then(n.bind(null,265));t.pronunciationEditApi=new e.EditPronunciationApi(t.config),yield t.pronunciationEditApi.getFromDB();for(var i=t.pronunciationEditApi.getPronunciations(),a=0;a<i.length;a++)t.Speech.addPronunciations(i[a].saythis,i[a].likethis)}))()},loadPronunciations:function(){var t=this;return V((function*(){t.pronunciationApi=new D(t.config),yield t.pronunciationApi.get();for(var e=t.pronunciationApi.getPronunciations(),n=0;n<e.length;n++)t.Speech.addPronunciations(e[n].saythis,e[n].likethis)}))()},loadPictureDictionary:function(){var t=this;n.e(155).then(n.bind(null,266)).then((function(e){t.pictureDictionary=new e.PictureDictionary(t.htmlparser,t.config.pictureDictionary),t.pictureDictionary.setLanguage(o.a.getPictureDictionaryLanguage())}))},loadDictionary:function(){var t=this;n.e(154).then(n.bind(null,267)).then((function(e){t.dictionary=new e.Dictionary(t.htmlparser,t.config.dictionary)}))},loadExtension:function(){var t=this;n.e(180).then(n.bind(null,268)).then((function(e){t.extension=new e.Extension(t.config),t.extension.setAnalyticsId()}))},loadTranslate:function(){var t=this;return V((function*(){t.config.isPdf&&t.config.translate.translatePage&&(t.transPDF(),t.loadTranslateBatch());var e=Promise.all([n.e(4),n.e(174),n.e(191)]).then(n.bind(null,269)),i=yield e;if(t.translateApi=new i.Translate(t.htmlparser,t.config.translate),t.config.isPdf&&t.config.translate.translatePage){var a=p.default[t.config.translate.translateSource],s=p.default[t.config.translate.translateDestination];null!=a&&null!=s&&(t.setTranslationDestination(BrowseAloud.translate.targetLang),t.setTranslationSource(BrowseAloud.translate.sourceLang))}else t.translateApi.setFrom(o.a.getTranslationSource()),t.translateApi.setTo(o.a.getTranslationDestination());var r=setInterval((function(){t.pdfRedirect&&(t.pdfRedirect.setFromLanguage(o.a.getTranslationSource()),t.pdfRedirect.setToLanguage(o.a.getTranslationDestination()),clearInterval(r))}),100)}))()},loadTranslateBatch:function(){var t=this;return V((function*(){var e=n.e(192).then(n.bind(null,270)),i=yield e;BrowseAloud.translateBatch=new i.TranslateBatch(t.config.translate)}))()},getVoiceFromSpeechRules:function(){if(null!=this.config.speechSettings.speechRules&&void 0!==this.config.speechSettings.speechRules)for(var t=this.config.speechSettings.speechRules,e="",n=0;n<t.length;n++){e=(e=(e=t[n].p.toLowerCase()).replace(/\*/g,"(.+)")).replace(/[\-\[\]\/\{}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var i=new RegExp(e);if(document.URL.toLowerCase().match(i)){var a=p.default;for(var s in a)if(a[s].id==t[n].t)return a[s]}}return null},loadMp3:function(){var t=this;n.e(193).then(n.bind(null,271)).then((function(e){t.mp3Controls=new e.mp3Controls(t.htmlparser,t.config)}))},loadHighlights:function(){var t=this;return V((function*(){yield n.e(181).then(n.bind(null,272)).then((function(e){t.highlightsApi=new e.HighlightsApi(t.htmlparser,t.config),t.highlightsApi.getHighlights()})),n.e(202).then(n.t.bind(null,158,7)),n.e(199).then(n.t.bind(null,159,7)),n.e(201).then(n.t.bind(null,160,7)),n.e(203).then(n.t.bind(null,161,7)),n.e(200).then(n.t.bind(null,162,7)),n.e(198).then(n.t.bind(null,163,7)),n.e(127).then(n.t.bind(null,29,7))}))()},loadNotes:function(){var t=this;n.e(183).then(n.bind(null,273)).then((function(e){t.notesApi=new e.NotesApi(t.htmlparser,t.config.notes),t.notesApi.getNotes(),t._registerNotesCallback()}))},resetTranslate:function(t){try{if(this.config.speechSettings.useElementLangTag||this.config.speechSettings.usePageLangTag){var e=this.translateApi.to.spokenLang||this.translateApi.to.glang;document.documentElement.lang=e}}catch(t){}this.translateApi.resetToOriginalLang(t);var n=this.translateApi.getVoice();this.config.isPdf&&(BrowseAloud.translate={sourceLangObj:this.getTranslateSource(),targetLangObj:this.translateApi.to,sourceLang:this.getTranslateSource().glang,targetLang:this.translateApi.to.glang},TextHelpTranslation.reset()),""!=n&&(this.setVoice(n),this.Speech.setTranslateVoice(n)),this.pdfRedirect&&this.pdfRedirect.pageIsTranslated(this.translateApi.isPageTranslated())},transPage:function(t){try{if(this.config.speechSettings.useElementLangTag||this.config.speechSettings.usePageLangTag){var e=this.translateApi.to.spokenLang||this.translateApi.to.glang;document.documentElement.lang=e}}catch(t){}this.translateApi.transPage(t);var n=this.translateApi.getVoice();this.config.isPdf&&(BrowseAloud.translate={sourceLangObj:this.getTranslateSource(),targetLangObj:this.translateApi.to,sourceLang:this.getTranslateSource().glang,targetLang:this.translateApi.to.glang},TextHelpTranslation.reset(),this.translateApi.to.glang!=this.translateApi.from.glang&&TextHelpTranslation.translatePages(!1)),""!=n&&(this.setVoice(n),this.Speech.setTranslateVoice(n)),this.pdfRedirect&&this.pdfRedirect.pageIsTranslated(this.translateApi.isPageTranslated())},translate:function(t){this.translateApi.translate(t);var e=this.translateApi.getVoice();""!=e&&null!=this.translateApi&&this.translateApi.pageTranslated&&this.Speech.setVoice(e)},setTranslationSourceFromName:function(t){var e=this;return V((function*(){var i="en-us",a=yield Promise.resolve().then(n.bind(null,15));try{for(var s in t=t.toLowerCase(),a.default)a.default[s].englishDescription.toLowerCase()==t&&(i=s)}catch(t){i="en-us"}e.setTranslationSource(i)}))()},setTranslationSource:function(t){o.a.setTranslationSource(t),this.translateApi&&this.translateApi.setFrom(o.a.getTranslationSource()),this.pdfRedirect&&this.pdfRedirect.setFromLanguage(o.a.getTranslationSource())},getTranslateSource:function(){return o.a.getTranslationSource()},getTranslationList:function(){return o.a.getTranslationList()},setTranslationDestinationFromName:function(t){var e=this;return V((function*(){var i="es-mx",a=yield Promise.resolve().then(n.bind(null,15));try{for(var s in t=t.toLowerCase(),a.default)a.default[s].englishDescription.toLowerCase()==t&&(i=s)}catch(t){i="es-mx"}e.setTranslationDestination(i)}))()},setTranslationDestination:function(t){o.a.setTranslationDestination(t);var e=o.a.getTranslationDestination();this.translateApi.setTo(e),this.config.pictureDictionary.setLangFromTranslate&&this.config.translate.translatePage&&this.setPictureDictionaryLanguage(t),this.pdfRedirect&&this.pdfRedirect.setToLanguage(e)},storeUpdateLocale:function(t){this.updateLocale=t},storeTransFinishedCallback:function(t){this.translateFinishedCallback=t},setTransFinishedCallback:function(t){this.translateApi.setFinishedCallback(t)},getTranslateDestination:function(){return o.a.getTranslationDestination()},setPictureDictionaryLanguage:function(t){null!=this.pictureDictionary&&(o.a.setPictureDictionaryLanguage(t),this.pictureDictionary.setLanguage(o.a.getPictureDictionaryLanguage()))},getPictureDictionaryLanguage:function(){return o.a.getPictureDictionaryLanguage()},loadPrediction:function(){var t=this;return V((function*(){var e=yield Promise.all([n.e(152),n.e(185)]).then(n.bind(null,274));t.prediction=new e.Prediction(t.htmlparser),t.prediction.enable(),t.prediction.createAPI()}))()},getPrediction:function(t,e){this.prediction.getPredictions(t,e)},predictionKeyUpEvent:function(t,e,n){this.prediction.predictionKeyUpEvent(t,e,n)},playAudioAlert:function(){null!=this.audioAlert&&null!=this.Speech?this.audioAlert.launch(this.Speech,this.config):this.playAudioAlertOnLoad=!0},play:function(){var t=null;null!=this.translateApi&&this.translateApi.pageTranslated&&(t=this.translateApi.getVoice()),this.Speech.play(t)},clickToSpeak:function(t){this.htmlparser.mouseClickEvent(t)},hoverSpeak:function(t){this.htmlparser.mouseOverEvent(t)},stop:function(){this.Speech.stop()},pause:function(){this.Speech.pause()},forward:function(){this.Speech.forward()},rewind:function(){this.Speech.rewind()},hoverSpeakOnOff:function(){var t=null;this.Speech.hoverSpeakOnOff(),null!=this.translateApi&&this.translateApi.pageTranslated&&(t=this.translateApi.getVoice(),this.Speech.setVoice(t))},clickToSpeakOnOff:function(){var t=null;this.Speech.clickToSpeakOnOff(),null!=this.translateApi&&this.translateApi.pageTranslated&&(t=this.translateApi.getVoice(),this.Speech.setVoice(t))},getHoverSpeakState:function(){return this.Speech.hoverSpeakEnabled},getClickToSpeakState:function(){return this.Speech.clickToSpeakEnabled},hoverSpeakOnOffOnLoad:function(){var t=this,e=setInterval((function(){if(t.Speech){var n=null;t.Speech.hoverSpeakOnOff(),clearInterval(e),null!=t.translateApi&&t.translateApi.pageTranslated&&(n=t.translateApi.getVoice(),t.Speech.setVoice(n))}}),100)},clickToSpeakOnOffOnLoad:function(){var t=this,e=setInterval((function(){if(t.Speech){var n=null;t.Speech.clickToSpeakOnOff(),clearInterval(e),null!=t.translateApi&&t.translateApi.pageTranslated&&(n=t.translateApi.getVoice(),t.Speech.setVoice(n))}}),100)},speakById:function(t,e){M.a.publish("analytics",{event:"Speech",action:w.a.SPEAKBYID_BUTTON}),this.Speech.speakById(t,e)},speakElement:function(t,e,n){M.a.publish("analytics",{event:"Speech",action:w.a.SPEAKELEMENT_BUTTON}),this.Speech.speakElement(t,e,n)},speakWithOutHighlight:function(t,e){this.Speech.speakWithOutHighlight(t,e)},setClickToSpeak:function(t){F.config.speechSettings.clickToSpeak=t,o.a.setClickToSpeak(t)},getClickToSpeak:function(){return o.a.getClickToSpeak()},setAnnounceLinksWord:function(t){o.a.setAnnounceLinksWord(t),this.htmlparser.setAnnounceLinksAsWords(t)},getAnnounceLinksWord:function(){return o.a.getAnnounceLinksWord()},addPronunciation:function(t,e,n,i,a){var s=this;this.pronunciationEditApi.add(t,e,n,(function(){s.Speech.addPronunciations(e,n),i()}),a)},updatePronunciation:function(t,e,n,i,a){var s=this;this.pronunciationEditApi.update(t,e,n,(function(){s.Speech.updatePronunciations(e,n),i("Pronunciation updated")}),a)},deletePronunciation:function(t,e,n,i,a){var s=this;this.pronunciationEditApi.delete(t,e,n,(function(){s.Speech.deletePronunciations(e,n),i("Pronunciation deleted")}),a)},setToolbarTheme:function(t){o.a.setToolbarTheme(t)},getToolbarTheme:function(){return o.a.getToolbarTheme()},getHighlightId:function(){return o.a.getHighlightId()},setHighlightId:function(t){this.setSentenceHighlightStyle(t),this.setWordHighlightStyle(t)},setSentenceHighlightStyle:function(t){o.a.setSentenceHighlightStyle(t);var e=o.a.getSentenceHighlightStyle();this.htmlparser.setSentenceHighlightStyle(e)},getSentenceHighlightStyle:function(){return o.a.getSentenceHighlightStyle()},setSpeechBookID:function(t,e){var n=this;return V((function*(){if(n.config.speechSettings.bookId=o.a.filterId(t),null!=n.Speech&&n.Speech.setBookId(n.config.speechSettings.bookId),null!=n.pronunciationApi){n.pronunciationApi.bookId=n.config.speechSettings.bookId;for(var i=n.pronunciationApi.changePageDynamically(),a=0;a<i.length;a++)if(null!=i[a].data&&0<i[a].data.length){var s,r=R(i[a].data);try{for(r.s();!(s=r.n()).done;){var c=s.value;n.Speech.deletePronunciations(c.saythis,c.likethis),n.pronunciationApi.deleteFromData(c)}}catch(t){r.e(t)}finally{r.f()}}e&&(yield n.getPronsAfterChange())}}))()},getSpeechBookID:function(){return this.config.speechSettings.bookId},getSpeechPageID:function(){return this.config.speechSettings.pageId},setSpeechPageID:function(t,e){var n=this;return V((function*(){if(n.config.speechSettings.pageId=o.a.filterId(t),null!=n.Speech&&n.Speech.setPageId(n.config.speechSettings.pageId),null!=n.pronunciationApi){n.pronunciationApi.pageId=n.config.speechSettings.pageId;for(var i=n.pronunciationApi.changePageDynamically(),a=0;a<i.length;a++)if(null!=i[a].data&&0<i[a].data.length){var s,r=R(i[a].data);try{for(r.s();!(s=r.n()).done;){var c=s.value;n.Speech.deletePronunciations(c.saythis,c.likethis),n.pronunciationApi.deleteFromData(c)}}catch(t){r.e(t)}finally{r.f()}}e&&(yield n.getPronsAfterChange())}}))()},setSpeechBookAndPageID:function(t,e){var n=this;return V((function*(){yield n.setSpeechBookID(t,!1),yield n.setSpeechPageID(e,!0)}))()},getPronsAfterChange:function(){var t=this;return V((function*(){yield t.pronunciationApi.get();for(var e=t.pronunciationApi.getPronunciations(),n=0;n<e.length;n++)t.Speech.addPronunciations(e[n].saythis,e[n].likethis)}))()},getUseNeural:function(){return this.config.speechSettings.enableNeural},setUseNeural:function(t){var e=this;return V((function*(){e.config.speechSettings.enableNeural=t,null!=e.Speech&&e.Speech.enableNeural(t)}))()},setWordHighlightStyle:function(t){o.a.setWordHighlightStyle(t);var e=o.a.getWordHighlightStyle();this.htmlparser.setWordHighlightStyle(e)},getWordHighlightStyle:function(){return o.a.getWordHighlightStyle()},getVoice:function(){return o.a.getVoice()},setVoice:function(t){o.a.setVoice(t),null!=this.Speech&&this.Speech.setVoice(t),null!=this.mp3Controls&&this.mp3Controls.setVoice(t)},setVoiceSpeed:function(t){o.a.setVoiceSpeed(t),null!=this.Speech&&this.Speech.setVoiceSpeed(t),null!=this.mp3Controls&&this.mp3Controls.setSpeed(t)},getVoiceSpeed:function(){return o.a.getVoiceSpeed()},setAnnounceLinks:function(t){o.a.setAnnounceLinks(t)},getAnnounceLinks:function(){return o.a.getAnnounceLinks()},setContinuousSpeechEnabled:function(t){o.a.setContinuousSpeechEnabled(t),this.Speech.setContinuousSpeechEnabled(t)},getContinuousSpeechEnabled:function(){return o.a.getContinuousSpeechEnabled()},setScreenMaskType:function(t){o.a.setScreenMaskType(t)},getScreenMaskType:function(){return o.a.getScreenMaskType()},setDocumentBodyTop:function(t){this.screenMask.setDocumentBodyTop(t)},setBackgroundColour:function(t){this.screenMask.setBackgroundColour(t),o.a.setBackgroundColour(t)},getBackgroundColour:function(){return o.a.getBackgroundColour()},setBackgroundOpacity:function(t){this.screenMask.setBackgroundOpacity(t),o.a.setBackgroundOpacity(t)},getBackgroundOpacity:function(){return o.a.getBackgroundOpacity()},setReadingLightHeight:function(t){this.screenMask.setReadingLightHeight(t),o.a.setReadingLightHeight(t)},getReadingLightHeight:function(){return o.a.getReadingLightHeight()},getReadingLightColour:function(){return o.a.getReadingLightColour()},setReadingLightColour:function(t){this.screenMask.setReadingLightColour(t),o.a.setReadingLightColour(t)},setReadingLightOpacity:function(t){this.screenMask.setReadingLightOpacity(t),o.a.setReadingLightOpacity(t)},getReadingLightOpacity:function(){return o.a.getReadingLightOpacity()},setReadingLightVisibility:function(t){this.screenMask.setReadingLightVisibility(t),o.a.setReadingLightVisibility(t)},getReadingLightVisibility:function(){return o.a.getReadingLightVisibility()},setScreenMaskSize:function(t){o.a.setScreenMaskSize(t)},getScreenMaskSize:function(){return o.a.getScreenMaskSize()},getScreenMaskColour:function(){o.a.getScreenMaskColour()},setScreenMaskColour:function(t){o.a.setScreenMaskColour(t)},setScreenMaskOpacity:function(t){o.a.setScreenMaskOpacity(t)},getScreenMaskOpacity:function(){return o.a.getScreenMaskOpacity()},setScreenMaskOnLoad:function(){var t=this,e=setInterval((function(){t.screenMask&&!t.screenMask.enabled&&(t.screenMask.enable(),clearInterval(e))}),100)},setTextMagnifierSize:function(t){o.a.setTextMagnifierSize(t)},getTextMagnifierSize:function(){return o.a.getTextMagnifierSize()},logAnalytics:function(t){var e=this,n=setInterval((function(){null!=e.analytics&&(e.config.isPAC&&"Unload"!=t.action&&e.extension&&e.extension.sendActivityMessage(),e.analytics.log(t),clearInterval(n))}),100)},setSpeechStartPoint:function(t){this.htmlparser.setPlayStartPoint(t)},getSpeechStartPoint:function(){return this.htmlparser.getPlayStartPoint()},getNewDomControl:function(t){return this.htmlparser.getNewDomControl(t)},setWrapperTagClass:function(t){this.htmlparser.setWrapperTagClass(t)},setWrapperTag:function(t){this.htmlparser.setWrapperTag(t)},setHighlightTag:function(t){this.htmlparser.setHighlightTag(t)},setBreakList:function(t,e){this.htmlparser.setBreakList(t,e)},setStyleList:function(t,e){this.htmlparser.setStyleList(t,e)},setMathSreSettings:function(t){this.htmlparser.getMathSreSettings(t)},getMathSreSettings:function(){return this.htmlparser.getMathSreSettings()},setHTMLMathSymbolText:function(t){this.htmlparser.mathSymbolControl.setSymbolText(t)},setUsingHTMLMathSymbolMapping:function(t){this.htmlparser.mathSymbolControl.setUsingMath(t)},setReadAriaHidden:function(t){this.htmlparser.setReadAriaHidden(t)},getReadAriaHidden:function(){return this.htmlparser.getReadAriaHidden()},setAriaLabelOnMathRoleEnabled:function(t){this.htmlparser.setAriaLabelOnMathRoleEnabled(t)},getAriaLabelOnMathRoleEnabled:function(){return this.htmlparser.getAriaLabelOnMathRoleEnabled()},setAriaLabelOnMathJaxClassEnabled:function(t){this.htmlparser.setAriaLabelOnMathJaxClassEnabled(t)},getAriaLabelOnMathJaxClassEnabled:function(){return this.htmlparser.getAriaLabelOnMathJaxClassEnabled()},setLanguageVoiceMapping:function(t){if(null!=this.config.defaultTranslateVoices&&void 0!==this.config.defaultTranslateVoices&&this.config.defaultTranslateVoices)for(var e in t)this.config.defaultTranslateVoices[e]=t[e];else this.config.defaultTranslateVoices=t;this.Speech.setLangVoiceMapping(this.config.defaultTranslateVoices)},getLanguageVoiceMapping:function(){return this.config.defaultTranslateVoices==this.Speech.getLangVoiceMapping()?this.Speech.getLangVoiceMapping():(this.Speech.setLangVoiceMapping(this.config.defaultTranslateVoices),this.config.defaultTranslateVoices)},setSimpleDictionaryEnabled:function(t){this.dictionary.setSimpleDictionaryEnabled(t)},getSimpleDictionaryEnabled:function(){return this.dictionary.getSimpleDictionaryEnabled()},setUseElementLangTags:function(t){this.config.speechSettings.useElementLangTag=t,this.Speech.setUseElementLangTags(t)},getUseElementLangTags:function(){return this.config.speechSettings.useElementLangTag==this.Speech.getUseElementLangTags()?this.Speech.getUseElementLangTags():(this.Speech.setUseElementLangTags(this.config.speechSettings.useElementLangTag),this.config.speechSettings.useElementLangTag)}}},8:function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"a",(function(){return a}));var i={SPEECHSTREAMTOOLBAR:"SpeechstreamToolbar",SPEECH:"Speech",SPEECH_UTILS:"SpeechUtils",TRANSLATE:"Translate",DICTIONARY:"Dictionary",PICTURE_DICTIONARY:"Picture dictionary",HIGHLIGHT:"Highlight",CALCULATOR:"Calculator",VOCABULARY:"Vocabulary",STICKY_NOTES:"Sticky notes",PRONUNCIATION:"Pronunciation",SCREEN_MASKING:"Screen masking",PREDICTION:"Prediction",SPELLING:"Spelling",SPEECH_INPUT:"Speech input",MP3_MAKER:"MP3 maker",FACT_FINDER:"Fact finder",SIMPLIFY:"Simplify"},a={LOAD:"load",CLICKTOSPEAK:"clicktospeak",HOVER:"hover",CONTINUOUS_READING:"continuous reading",PLAY_BUTTON:"play",REWIND_BUTTON:"rewind",FORWARD_BUTTON:"forward",PAUSE_BUTTON:"pause",STOP_BUTTON:"stop",SPEAKBYID_BUTTON:"speak by ID",SPEAKFROMID_BUTTON:"speak from ID",SPEAKELEMENT_BUTTON:"speak Element",USER_SPEECH:"user",MATHML:"mathml",CLICK:"click",CLEAR:"clear",COLLECT:"collect",OPEN:"Open",ADD:"add",UPDATE:"update",DELETE:"delete",RETRIEVE:"retrieve",CREATE:"create",SIGNIN:"signin",SIGNEDIN:"successful signin",ARIA_MATH_ROLE_LABEL:"Aria math role label"}}}]);